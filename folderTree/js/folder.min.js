(function($){$.fn.folderAccordionMenu=function(){this.each(function(index){var $this=$(this);var folder=new FolderMenu($(this));$this.data('folderAccorionMenu',folder)});return this}$.fn.selectFolderAccordionMenu=function(mainIndex,subIndex,animation){this.each(function(index){var folderMenu=$(this).data('folderAccorionMenu');folderMenu.selectMenu(mainIndex,subIndex,animation)});return this}})(jQuery);function FolderMenu(selector){this.$accordionMenu=null;this._$mainMenuItems=null;this._$selectSubItem=null;this._init(selector);this._initSubMenuPanel();this._initEvent()}FolderMenu.prototype._init=function(selector){this.$accordionMenu=$(selector);this._$mainMenuItems=this.$accordionMenu.children('li')};FolderMenu.prototype._initEvent=function(){var objThis=this;this._$mainMenuItems.children('.main-title').click(function(e){var $item=$(this).parent();objThis.toggleSubMenuPanel($item)});this._$mainMenuItems.find('.sub li').click(function(e){var subMenuVal=($(this).attr('value'));objThis._selectSubMenuItem($(this))})}FolderMenu.prototype._initSubMenuPanel=function(){var objThis=this;this._$mainMenuItems.each(function(index){var $item=$(this);var $subMenu=$item.find('.sub');var dataExt=$item.attr('data-extension');if($subMenu.length===0){$item.attr('data-extension','empty');objThis.setFolderState($item,'empty')}else{switch(dataExt){case'open':objThis.openSubMenu($item,false);break;case'close':$item.attr('data-extension','close');objThis.closeSubMenu($item,false);break;default:return}}})}FolderMenu.prototype.setFolderState=function($item,state){var $folder=$item.find('.main-title .folder');$folder.removeClass();$folder.addClass('folder '+state)}FolderMenu.prototype.openSubMenu=function($item,animation){if($item!=null){$item.attr('data-extension','open');var $subMenu=$item.find('.sub');if(animation==='false'){$subMenu.css({marginTop:0})}else{$subMenu.stop().animate({marginTop:0},300,'easeInCubic')}this.setFolderState($item,'open')}}FolderMenu.prototype.closeSubMenu=function($item,animation){if($item!=null){$item.attr('data-extension','close');var $subMenu=$item.find('.sub');var SubMenuPanelHeight=-$subMenu.outerHeight(true);if(animation===false){$subMenu.css({marginTop:SubMenuPanelHeight})}else{$subMenu.stop().animate({marginTop:SubMenuPanelHeight},300,'easeInCubic')}this.setFolderState($item,'close')}}FolderMenu.prototype.toggleSubMenuPanel=function($item){var ext=$item.attr('data-extension');if(ext==='empty'){return}switch(ext){case'open':console.log('하위 내용이 있는 경우에만 실행됩니다.');this.closeSubMenu($item);break;case'close':this.openSubMenu($item);break;default:return}}FolderMenu.prototype.closeSubMenuAt=function(index,animation){var $item=this._$mainMenuItems.eq(index);this.closeSubMenu($item,animation)}FolderMenu.prototype.openSubMenuAt=function(index,animation){var $item=this._$mainMenuItems.eq(index);this.openSubMenu($item,animation)}FolderMenu.prototype._selectSubMenuItem=function($item){if(this._$selectSubItem!=null){this._$selectSubItem.removeClass('select')}this._$selectSubItem=$item;var $subMenuVal=$item.attr('value');this._$selectSubItem.addClass('select');this.makeImage($subMenuVal)}FolderMenu.prototype.makeImage=function($item){var subMenuval=$item;var imgPath='./images/Heroes/';var path=imgPath+subMenuval+'.jpg';var $img=$('<img>').attr('src',path);$img.addClass('imgDiv');$('#imgDiv').append($img)}